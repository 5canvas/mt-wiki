{{TOCright}}
== Что необходимо знать ==

Если вы хотите установить MT на виртуальный хостинг, ознакомьтесь со [[Хостинг для Movable Type|списком рекомендуемых хостеров]].

== Системные требования ==

Чтобы начать работать с Movable Type, не нужно иметь свой собственный сервер, достаточно взять в аренду хостинг. Тем не менее, если у вас есть собственный сервер или VPS (виртуальный выделенный сервер), то следующая информация поможет определить, удовлетворяет ли он требованиям для работы с Movable Type.

* См. статью [[Системные требования]]

== Какие программы потребуются для установки ==

Для загрузки файлов на сервер потребуется FTP или SSH клиент. В качестве FTP-клиента можно порекомендовать бесплатную программу [http://filezilla-project.org/ Filezilla]. А для работы с SSH — бесплатную программу [http://putty.org.ru/ Putty] (расширенная версия — [http://www.extraputty.com/ ExtraPuTTY]) или платную [http://www.vandyke.com/products/securecrt/ SecureCRT].

'''Необходимая для установки информация:'''

* Имя пользователя и пароль для доступа на сервер (по FTP или SSH);
* Путь до директории, где разрешено выполнение CGI-скриптов (обычно это папка cgi или cgi-bin);
* Путь до директории, где будет располагаться сайт;
* Путь до директории, где будут находиться статические файлы Movable Type;
* Хост базы банных, а также имя пользователя и пароль.

Примечание: базу данных необходимо создать до установки MT. 


== Быстрая установка Movable Type ==

Чтобы быстро установить Movable Type, следуйте следующим инструкциям:
# Загрузите на сервер все файлы Movable Type, кроме папки <code>mt-static</code>. Файлы должны быть загружены в папку <code>cgi-bin</code> (или <code>cgi</code>), в которой разрешено выполнение CGI скриптов. Например, вот как может выглядеть стандартная установка: <code>http://example.com/cgi-bin/mt/</code>.
# Папку <code>mt-static</code> необходимо загрузить в корневую директорию вашего сайта, чтобы доступ к ней был следующего вида: <code>http://example.com/mt-static/</code>.
# На все .cgi файлы (например, mt.cgi, mt-search.cgi, и т.д.), находящиеся в директории Movable Type, необходимо выставить права доступа (CHMOD) 755.
# Откройте Movable Type в браузере. Например, адрес может выглядеть так: <code>http://example.com/cgi-bin/mt/mt.cgi</code>. 
# Автоматически запустится инсталлятор. Следуйте инструкциям установки.


== Детальное описание установки Movable Type ==

В этом разделе детально рассмотрена установка Movable Type на Linix-сервер, а также несколько дополнительных действий, чтобы в будущем избежать возможных проблем.

=== Работа с дистрибутом ===

Последнюю стабильную русскую версию всегда можно скачать по адресу:

* '''[http://movable-type.ru/mt-latest movable-type.ru/mt-latest]''' (или в [http://movable-type.ru/mt-latest-tar tar.gz-архиве])

Остальные версии, включая архивные, расположены на открытом проекте сервиса Google Code: [http://code.google.com/p/movabletype/downloads/list code.google.com/p/movabletype/downloads/list].

Если вам необходима английская версия (английский и несколько других языков есть и в русской версии) или Pro-версия, то скачать Movable Type можно по следующим адресам:

* [http://www.movabletype.org/download.html www.movabletype.org/download.html] — Open Source версия, которую можно использовать для любых целей (на основе этого дистрибутива создана русская версия);
* [http://www.movabletype.com/download/ www.movabletype.com/download/] — Pro-версия Movable Type, бесплатно доступная для всех пользователей, не являющихся юридическими лицами.

=== Отличия версий ===

* См. статью [[Версии Movable Type]]


=== Получение необходимой информации ===

==== Папка для скриптов ====

Платформа Movable Type написана на языке Perl, поэтому для успешной работы необходимо узнать, в какой папке на сервере возможно выполнение CGI-скриптов. Обычно эта папка называется cgi или cgi-bin, и может быть доступна по адресу <code><nowiki>http://example.com/cgi/</nowiki></code> или <code><nowiki>http://example.com/cgi-bin/</nowiki></code> одновременно. Папка <code>cgi</code> обычно располагается на том же уровне, где и корневая папка документов домена.

[[Файл:Cgi-dir2.png|Расположение папки с CGI-скриптами]]

Если вы сомневаетесь, где находится папка для выполнения CGI-скриптов, то необходимо уточнить эту информацию у службы поддержки хостера или у администратора сервера.

==== Папка со статическими файлами ====

В дистрибутиве Movable Type есть специальная папка, в которой содержатся все статические файлы — [[mt-static]]. По умолчанию она находится в той же папке, где и все остальные файлы. Но её необходимо разместить в корневой директории вашего сайта. Вот как это может выглядеть:

[[Файл:Mt-staic-dir.png|Расположение папки mt-static]]

==== Адрес и путь расположения блога ====

Блог может располагаться как в корневой директории, так и в любой поддиректории, и даже на отдельном домене. Рассмотрим вариант с установкой блога в корневую директорию домена.

Корневая директория домена — это, обычно, папка <code>docs</code>, <code>htdocs</code> или <code>public_html</code>. В этой папке хранятся документы, которые будут доступны по адресу <code><nowiki>http://example.com/</nowiki></code>.

* Относительный URL: <code>/example-folder/</code>
* Абсолютный URL : <code><nowiki>http://example.com/example-folder/</nowiki></code>
* Относительный путь на сервере: <code>./example-folder</code>
* Абсолютный путь на сервере: <code>/home/username/example.com/docs/example-folder</code>

Обратите внимание, что относительный путь на сервере не может начинаться со слэша (знак косой черты — «/»), иначе путь будет рассчитываться от корневой директории сервера.

==== База данных ====

Для работы Movable Type 4 подойдёт одна из следующих баз данных: MySQL, PostgreSQL или SQLite. Рекомендуется использовать MySQL или PostgreSQL, так как именно с этими базами данных Movable Type работает наиболее быстро.

При установке необходимо будет указать имя пользователя, название базы данных, а также хост, на котором она работает. Всю эту информацию предоставляет хостер или администратор сервера при создании базы данных.

==== FTP и SSH ====

[http://ru.wikipedia.org/wiki/FTP FTP] — это простой способ переслать файлы на другой сервер; это специальный протокол, который поддерживается практически всеми серверами.

[http://ru.wikipedia.org/wiki/SSH SSH] — это продвинутый, защищённый протокол, с помощью которого можно удалённо управлять сервером, отправляя ему необходимые команды.

Для работы того или другого понадобятся следующие данные: имя пользователя, пароль, хост для подключения.
Для работы с SSH вам понядобятся знать некоторые команды. Самые распространённые из них приведены в статье [[Полезные команды Linux]].


=== Закачка дистрибутива на сервер ===

После того, как вы скачали архив с дистрибутивом, его необходимо распаковать и закачать на свой сервер. Рекомендуется создать в папке <code>cgi</code> подпапку mt и закачивать файлы в неё. 

[[Файл:Mt-files.png|Файлы Movable Type]]

Примечание: Не забудьте переместить папку <code>mt-static</code> в корневую директорию домена.

Примечание: при закачке файлов по FTP, теряются права доступа на них. Поэтому нужно вручную установить права доступа(CHMOD) на все файлы с расширение <code>.cgi</code> равные 755.

[[Файл:Mt-files-chmod.png|Установка прав доступа]]

Если вы используете SSH, то гораздо проще и быстрее будет закачать на сервер архив, и уже там распаковать его. Для этого используйте следующие команды:

<source lang="bash">cd /home/username/example.com/cgi</source>
''(переход в папку cgi)''

<source lang="bash">wget http://movable-type.ru/mt-latest-tar</source>
''(скачивание архива tar.gz с последней русской версией Movable Type)''

<source lang="bash">tar xzf MT*.tar.gz</source>
''(распаковка архива)''

После этих действий  в папке <code>cgi</code> у вас будет архив <code>MT-4.32-ru.tar.gz</code> (версия может отличаться), а также папка <code>MT-4.32-ru</code>. Теперь необходимо переименовать папку <code>MT-4.32-ru</code> в папку mt. Для этого нужна специальная команда:
<source lang="bash">mv MT-4.32-ru mt</source>

Основная папка Movable Type переименована, но в ней по-прежнему находится папка со статическими файлами, её необходимо переместить:
<source lang="bash">cd mt</source>
''(переход в папку mt)''

<source lang="bash">mv mt-static /home/username/example.com/docs/mt-static</source>
''(перемещение папки mt-static в корневую директорию домена)''


=== Подготовка базы данных ===

Movable Type использует кодировку UTF-8. Это наиболее современная кодировка, которую поддерживает большинство серверов. На российских серверах, чаще всего, установлена кодировка cp1251 (windows-1251) — кириллица. А на зарубежных — latin1. Поэтому необходимо настроить базу данных на корректную работу с кодировкой UTF-8.

Пример настройки базы данных MySQL через PHPMyAdmin:

[[Файл:Mysql-encoding.png|700px|Настройка кодировки базы данных]]


=== Установка Movable Type ===

Для установки откройте в браузере адрес, на котором располагается MT. Например, это может быть адрес <code><nowiki>http://example.com/cgi-bin/mt/mt.cgi</nowiki></code>. Если всё нормально, то запустится инсталлятор, с помощью которого нужно будет указать необходимые для установки данные.


== Возможные проблемы при установке или после неё ==

'''500-я ошибка сервера'''

Возникает, чаще всего, из-за того, что неправильно установлены права доступа на CGI-скрипты. В Linux- системах, чтобы подобные скрипты были «выполняемыми», на них необходимо установить права доступа 755 (по-другому права доступа называются CHMOD, от англ. change mode). 

'''После установки на сайте кириллица отображается какими-то непонятными символами'''

Это значит, что на сервере по умолчанию выставлена неправильная кодировка. Чаще всего, это <code>cp1251</code> (<code>windows-1251</code>). Необходимо изменить кодировку по умолчанию на UTF-8. Для этого, если у вас веб-сервер Apache, добавьте в корневой каталог вашего сайта файл <code>.htaccess</code> (с точкой в начале):
<source lang="apache">AddDefaultCharset utf-8</source>

Если подобная проблема возникает при работе с Movable Type, то попробуйте добавить в файл [[mt-config.cgi]] следующую строчку:
<source lang="perl">SQLSetNames 1</source>



== См. также ==

* [[Полезные команды Linux]]
* [[Хостинг для Movable Type]]
* [[Установка и настройка Denwer]]
* [http://movable-type.ru/2008/04/screncast-install-mt4.php Видео-инструкция по установке Movable Type]


== Авторы этой статьи ==

* [[Служебная:Contributors/Установка Movable Type]]

[[Категория:Установка и настройка Movable Type]]
[[Категория:Избранные статьи]]

